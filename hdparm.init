#!/bin/sh

# Source function library
. /etc/rc.d/init.d/functions

# Get service config
[ -f /etc/sysconfig/hdparm ] && . /etc/sysconfig/hdparm

DRIVES=`cut -c 22- < /proc/partitions | egrep -v -e"md|name"`
for drive in $DRIVES; do
	eval PARAMS=\${HDPARM_${drive}}
	if [ -n "${PARAMS}" ] ; then
		show "Setting parameters for drive %s" "$drive"
		busy
		/sbin/hdparm ${PARAMS} /dev/$drive
		deltext
		ok
	fi
done  
exit 0
